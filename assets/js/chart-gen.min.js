class ChartGen{constructor(t){const e=document.createElement("mapContainer");t.appendChild(e),t.querySelector("mapContainer").outerHTML='\n\t\t\t<div class="chart-gen-container-ref" data-map>\n\t\t\t\t<div class="chart-gen-container"></div>\n\t\t\t</div>',this.cartesianMap=t.querySelector("[data-map]"),this.cartesianMap.removeAttribute("data-map"),this.initValues=null;const a=()=>{this.initValues&&(this.cartesianMap.querySelector(".chart-gen-container").innerHTML=""),this.init(this.initValues.info,this.initValues.options,this.initValues.callback)};window.removeEventListener("resize",a),window.addEventListener("resize",a)}getDots(){return this.cartesianMap.querySelectorAll("[data-ref]")}getDotRefs(){const t=[],e=this.cartesianMap.getBoundingClientRect();return this.getDots(this.cartesianMap).forEach((a,s)=>{t.push({node:a.getBoundingClientRect(),left:a.getBoundingClientRect().left-e.left,bottom:e.bottom-a.getBoundingClientRect().bottom})}),t}calculateLine(t,e,a,s=0){const i=e.bottom-t.bottom,n=e.left-t.left,o=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));let r=180*Math.atan2(i,n)/Math.PI;const l=parseInt(t.node.width/2);r*=-1,a.style.bottom=t.bottom+l+"px",a.style.left=t.left+l+"px",a.style.transform="rotate("+r+"deg)",setTimeout(()=>{a.style.width=o+"px"},s)}calculateBar(t,e,a=0){let s=t.left,i=t.bottom;const n=e.getBoundingClientRect().width/2,o=t.node.width/2;i+=parseInt(o),s+=parseInt(o-n),e.style.left=s+"px",setTimeout(()=>{e.style.height=i+"px"},a)}generateLines(t){let e=this.getDotRefs(),a=75;const s=this.cartesianMap.querySelector(".chart-gen-container");for(let t=1;t<e.length;t++){let i=document.createElement("div");i.setAttribute("class","line"),s.appendChild(i),this.calculateLine(e[t-1],e[t],i,a),a+=150}"function"==typeof t&&setTimeout(()=>{t()},a+75)}generateBars(t){const e=this.getDotRefs();let a=75;const s=this.cartesianMap.querySelector(".chart-gen-container");e.forEach((t,e)=>{let i=document.createElement("div");i.setAttribute("class","bar"),s.appendChild(i),this.calculateBar(t,i,a),a+=90}),"function"==typeof t&&setTimeout(()=>{t()},a+175)}cleanLines(t){const e=this.cartesianMap.querySelectorAll(".line");let a=0;Array.from(e).reverse().forEach((t,e)=>{setTimeout(()=>{t.style.removeProperty("width"),setTimeout(()=>{t.outerHTML=""},150)},a),a+=150}),"function"==typeof t&&setTimeout(()=>{t()},a+75)}cleanBars(t){const e=this.cartesianMap.querySelectorAll(".bar");let a=0;Array.from(e).reverse().forEach((t,e)=>{setTimeout(()=>{t.style.removeProperty("height"),setTimeout(()=>{t.outerHTML=""},150)},a),a+=150}),"function"==typeof t&&setTimeout(()=>{t()},a+75)}cleanDots(t){const e=this.cartesianMap.querySelectorAll(".dot");let a=0;Array.from(e).reverse().forEach((t,e)=>{setTimeout(()=>{t.classList.remove("show-dot")},a),a+=150}),"function"==typeof t&&setTimeout(()=>{t()},a+75)}showDots(){const t=this.cartesianMap.querySelectorAll(".dot");let e=0;Array.from(t).forEach((t,a)=>{setTimeout(()=>{t.classList.add("show-dot")},e),e+=150}),"function"==typeof callback&&setTimeout(()=>{callback()},e+75)}setLimits(t){const e={};return e.minValue=Math.min.apply(null,t),e.maxValue=Math.max.apply(null,t),e.maxValue=parseInt(e.maxValue+e.maxValue/100*20),e.amount=t.length,e}calculateDotPos(t,e,a){return t/100*(a/(e/100))}generateDots(t={},e=!0,a){const s=this.cartesianMap.getBoundingClientRect(),i=this.cartesianMap.querySelector(".chart-gen-container"),n=this.setLimits(t.values);let o=(s.width-40)/n.amount,r=20+parseInt(o.toFixed(2)/2);"maxStep"in t&&(o=(s.width-40)/t.maxStep);let l=75;t.values.forEach((a,c)=>{const u=this.calculateDotPos(s.height,n.maxValue,a),h=document.createElement("div");"maxStep"in t&&t.maxStep&&(r=t.steps[c]*o),h.setAttribute("class","dot"),h.setAttribute("data-ref",`dot${c+1}`),h.setAttribute("style",`left: ${r.toFixed(3)}px; bottom: ${u.toFixed(3)}px;`),i.appendChild(h),"maxStep"in t||(r+=o),e&&(setTimeout(()=>{h.classList.add("show-dot")},l),l+=170)}),"function"==typeof a&&setTimeout(()=>{a()},l+75)}init(t={},e={},a=(()=>{})){this.initValues={info:t,options:e,callback:()=>{a()}};const s="steps"in t&&"maxStep"in t,i=!("withDots"in e)||e.withDots,n="withBars"in e&&!e.withBars?()=>{a()}:()=>{this.generateBars(a)},o="withLines"in e&&!e.withLines?()=>{n()}:()=>{this.generateLines(n)};(s?()=>{this.generateDots({values:t.values,maxStep:t.maxStep,steps:t.steps},i,()=>{o()})}:()=>{this.generateDots({values:t.values},i,()=>{o()})})()}}